// Generated by CoffeeScript 1.9.3
var BN;

if (typeof BN === "undefined" || BN === null) {
  BN = {};
}

if (BN.DB == null) {
  BN.DB = {};
}

BN.DB.noteTree = null;

BN.DB.fs = require('fs');

BN.DB.init = function() {
  BN.DB.noteTree = BN.DB.readFileTree(BN.CFG.notebookPath);
  console.log('NoteBook tree:');
  return console.log(BN.DB.noteTree);
};

BN.DB.readFileTree = function(path) {
  var tree;
  tree = BN.DB.scanPath(path);
  return tree;
};

BN.DB.scanPath = function(path) {
  var dirTree, files, tree;
  tree = {};
  dirTree = {};
  tree.files = [];
  tree.dirs = [];
  files = BN.DB.fs.readdirSync(path);
  files.forEach(function(entry) {
    var fStats, fullPath;
    fullPath = path + entry;
    fStats = BN.DB.fs.statSync(fullPath);
    if (fStats.isDirectory()) {
      dirTree = BN.DB.scanPath(fullPath + '/');
      tree.dirs.push({
        name: entry,
        path: fullPath,
        isOpened: false,
        tree: dirTree
      });
    }
    if (fStats.isFile()) {
      return tree.files.push({
        name: entry,
        path: fullPath
      });
    }
  });
  return tree;
};
